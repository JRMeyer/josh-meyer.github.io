# PREREQUISITES #

sudo apt-get update
sudo apt-get install git gcc unzip sox libsox-fmt-mp3
sudo apt-get install python3-dev virtualenv


# GET DATA #

wget clips.tsv.zip
unzip clips.tsv.zip
wget audio.zip
unzip audio.zip -d audio


# GET DEEPSPEECH + VENV #

git clone https://github.com/mozilla/DeepSpeech
cd DeepSpeech
bash .install # we need venv for CorporaCreator
source ../tmp/venv/bin/activate
cd ..


# GET CORPORACREATOR + FORMAT TSVs #

git clone https://github.com/mozilla/CorporaCreator
cd CorporaCreator
python3 setup.py install
create-corpora -f clips.tsv -d corpora -l LANG -s 10
cd ..


# GET ALPHABET #
python3 DeepSpeech/util/check_characters.py -csv CreateCorpora/corpora/LANG/train.csv,CreateCorpora/corpora/LANG/test.csv,CreateCorpora/corpora/LANG/dev.csv -alpha
# now, copy-paste output from above command into alphabet.txt
emacs data/alphabet.txt


# TRAIN DEEPSPEECH #

cd DeepSpeech
python3 bin/import_cv2.py ../CorporaCreator/corpora/ky ~/Downloads/ky
emacs .compute # add paths to ~/Downloads/ky/{train,dev,test}.csv
bash .compute



### YOU'VE GOT A DIGIT RECOGNIZER! ###
